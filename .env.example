# =============================================================================
# Supabase
# =============================================================================
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=
NEXT_PUBLIC_SUPABASE_PROJECT_REF=
SUPABASE_MANAGEMENT_API_TOKEN=

# Supabase Auth – OAuth providers (local dev: config.toml uses these)
# Discord: Discord Developer Portal → Application → OAuth2. Redirect URI: http://localhost:54321/auth/v1/callback (local) or https://<project-ref>.supabase.co/auth/v1/callback (prod)
SUPABASE_AUTH_EXTERNAL_DISCORD_CLIENT_ID=
SUPABASE_AUTH_EXTERNAL_DISCORD_SECRET=
# GitHub: GitHub → Settings → Developer settings → OAuth Apps. Authorization callback URL: http://127.0.0.1:54321/auth/v1/callback (local) or https://<project-ref>.supabase.co/auth/v1/callback (prod)
# Values can be stored in Notion Credentials (MOOD MNKY Credentials) and copied here.
SUPABASE_AUTH_EXTERNAL_GITHUB_CLIENT_ID=
SUPABASE_AUTH_EXTERNAL_GITHUB_SECRET=

# =============================================================================
# Notion (MNKY MIND / MNKY VERSE)
# =============================================================================
# MNKY MIND API KEY — from Notion Credentials → Parent Program "Notion", Use Cases "MNKY MIND API KEY"
# Used by: lib/notion.ts, seed script, sync APIs, blog sync. See docs/CREDENTIALS-NOTION-MAPPING.md
NOTION_API_KEY=
# MNKY Manga sync: Notion database IDs (created under MNKY_MIND Databases)
# MNKY Manga Collections = manga series (e.g. World Traveler Series)
NOTION_MNKY_COLLECTIONS_DATABASE_ID=fc437b6b-1fae-42fd-a98b-20b08ed12716
# MNKY Manga Issues = one issue per collection (e.g. Passport of the Senses)
NOTION_MNKY_ISSUES_DATABASE_ID=f9110e0c-667a-4b0e-9497-ee7b8dd6b124
# Optional: Chapters, Panels, Hotspots (create in Notion and add IDs here)
# NOTION_MNKY_CHAPTERS_DATABASE_ID=
# NOTION_MNKY_PANELS_DATABASE_ID=
# NOTION_MNKY_HOTSPOTS_DATABASE_ID=

# =============================================================================
# Jotform (funnel intake forms, webhooks)
# =============================================================================
JOTFORM_API_KEY=
# Optional: validate webhook requests via ?token= in URL
JOTFORM_WEBHOOK_SECRET=
# Optional: default https://api.jotform.com
# NEXT_PUBLIC_JOTFORM_BASE_URL=
# Optional: API key for script/curl access to funnel admin endpoints (x-api-key header)
# FUNNEL_ADMIN_API_KEY=

# =============================================================================
# Shopify
# =============================================================================
SHOPIFY_STORE_DOMAIN=
SHOPIFY_ADMIN_API_TOKEN=
# App secret (Partner Dashboard → App setup → Client credentials). Used for webhook HMAC when SHOPIFY_WEBHOOK_SECRET is unset.
SHOPIFY_API_SECRET=
NEXT_PUBLIC_SHOPIFY_STORE_DOMAIN=

# MNKY VERSE Storefront API (Hydrogen channel - Shopify Admin → Hydrogen → MNKY VERSE)
# Get tokens from: Hydrogen → Environments and variables. Copy from Notion: MOOD MNKY Credentials database
NEXT_PUBLIC_STORE_DOMAIN=
PUBLIC_STORE_DOMAIN=
NEXT_PUBLIC_STOREFRONT_API_TOKEN=
PUBLIC_STOREFRONT_API_TOKEN=
PRIVATE_STOREFRONT_API_TOKEN=
PUBLIC_STOREFRONT_ID=
NEXT_PUBLIC_STOREFRONT_ID=

# MNKY VERSE - Customer Account API (Authenticate with Shopify on /verse)
# No leading/trailing spaces or newlines or Shopify returns "invalid client credentials"
PUBLIC_CUSTOMER_ACCOUNT_API_CLIENT_ID=
PUBLIC_CUSTOMER_ACCOUNT_API_URL=
# Optional: paste from Shopify app "Application endpoints" to skip discovery (recommended for stability)
# PUBLIC_CUSTOMER_ACCOUNT_API_AUTHORIZE_URL=https://shopify.com/authentication/YOUR_SHOP_ID/oauth/authorize
# PUBLIC_CUSTOMER_ACCOUNT_API_TOKEN_URL=https://shopify.com/authentication/YOUR_SHOP_ID/oauth/token
# PUBLIC_CUSTOMER_ACCOUNT_API_LOGOUT_URL=https://shopify.com/authentication/YOUR_SHOP_ID/logout
# Example (MNKY VERSE app 69343281426):
# PUBLIC_CUSTOMER_ACCOUNT_API_AUTHORIZE_URL=https://shopify.com/authentication/69343281426/oauth/authorize
# PUBLIC_CUSTOMER_ACCOUNT_API_TOKEN_URL=https://shopify.com/authentication/69343281426/oauth/token
# PUBLIC_CUSTOMER_ACCOUNT_API_LOGOUT_URL=https://shopify.com/authentication/69343281426/logout
SHOP_ID=

# Base URL for mood-mnky-command app. Used for theme integration (App CTA section).
# Set in theme editor: Theme customizer → App CTA section → App base URL.
# Dev: http://localhost:3000 | Prod: https://mnky-command.moodmnky.com
# For local Customer Account API: set to ngrok URL (e.g. https://unupbraiding-unilobed-eustolia.ngrok-free.dev)
NEXT_PUBLIC_APP_URL=

# MNKY VERSE / Gamification — App Proxy & Webhooks
# Used by: /apps/mnky/session (JWT for theme), Flowise tools. Same value in Flowise as moodMnkyApiKey.
MOODMNKY_API_KEY=
# Optional: dedicated secret for App Proxy JWT signing. If unset, MOODMNKY_API_KEY is used.
# APP_PROXY_JWT_SECRET=
# Webhook HMAC verification (orders/paid → XP). If unset, SHOPIFY_API_SECRET is used.
# SHOPIFY_WEBHOOK_SECRET=

# MNKY VERSE storefront domain. Used when request origin unavailable (fallback in auth callbacks).
# Prod: https://mnky-verse.moodmnky.com
NEXT_PUBLIC_VERSE_APP_URL=

# ngrok: full domain (e.g. unupbraiding-unilobed-eustolia.ngrok-free.dev) or subdomain for .ngrok-free.app
# Claim at https://dashboard.ngrok.com/cloud-edge/domains
# For local Shopify Customer Account API: if NEXT_PUBLIC_APP_URL is unset, callback URL is built as https://NGROK_DOMAIN.
# NGROK_DOMAIN=unupbraiding-unilobed-eustolia.ngrok-free.dev
# NGROK_DOMAIN_ID=rd_38XBK3SC6E899PG49l1gy78KBqs

# =============================================================================
# OpenAI (MOOD MNKY — Studio AI images, Platform AI-SQL, AI Chat)
# =============================================================================
# MOOD MNKY — from Notion Credentials → Parent Program "OpenAI", Use Cases "MOOD_MNKY"
OPENAI_API_KEY=
# Optional: OPENAI_ORG_ID for MOOD MNKY org scoping
# OPENAI_ORG_ID=

# AI Chat: Base URL for internal API calls (e.g. image generation from tools).
# Uses NEXT_PUBLIC_APP_URL when set; otherwise defaults to http://localhost:3000.

# Flowise tools (MOOD MNKY API): Validates Authorization: Bearer when Flowise Custom Tools
# call /api/flowise/tools/*. Must match MOODMNKY_API_KEY (see MNKY VERSE / Gamification above).
# FLOWISE_API_KEY=

# =============================================================================
# n8n (CODE MNKY — batch workflows, image automation)
# =============================================================================
# CODE MNKY API KEY — from Notion Credentials → Parent Program "N8N", Use Cases "CODE MNKY API KEY"
N8N_API_KEY=
N8N_API_URL=

# =============================================================================
# Media API / n8n (upload-from-url, update-image)
# =============================================================================
# Preferred: MEDIA_API_KEY. Legacy: CDN_API_KEY (deprecated)
# Used when n8n or external systems call app's upload-from-url endpoint
MEDIA_API_KEY=

# =============================================================================
# MCP / Research (Tavily, Brave, Firecrawl — Cursor MCP, deep research)
# =============================================================================
# From Notion Credentials. Used by mcp-setup.md, deep-thinking, docs scripts.
TAVILY_API_KEY=
BRAVE_API_KEY=
FIRECRAWL_API_KEY=

# =============================================================================
# ElevenLabs (MOOD MNKY voice agent — Verse + LABZ)
# =============================================================================
ELEVEN_LABS_API_KEY=
# NEXT_PUBLIC_ELEVENLABS_AGENT_ID=

# =============================================================================
# Adobe PDF Services (formula export - POST /api/formulas/[id]/export-pdf)
# =============================================================================
# From Adobe Developer Console: Add PDF Services API to your project, create OAuth Server-to-Server credentials
PDF_SERVICES_CLIENT_ID=
PDF_SERVICES_CLIENT_SECRET=

# =============================================================================
# Rate limiting (Upstash Redis) for mag/ugc endpoints. When unset, limits are not enforced.
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

# =============================================================================
# Discord (MNKY VERSE Community + LABZ control panel)
# =============================================================================
# Public; used on /verse/community for "Join Discord" button. Set in Vercel for production.
NEXT_PUBLIC_DISCORD_INVITE_URL=https://discord.gg/CTad3UJwCy
# Bot token (LABZ Discord panel: send messages, webhooks, roles, moderation). From Discord Developer Portal → Bot.
# DISCORD_BOT_TOKEN_MNKY_VERSE=
# Discord OAuth for Supabase (Login with Discord) is configured via SUPABASE_AUTH_EXTERNAL_DISCORD_* above.
# Encrypts webhook tokens stored in DB (create/execute webhooks from LABZ). Generate with:
#   node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# Use a new 64-char hex value; keep the same value per environment or existing stored webhooks cannot be decrypted.
DISCORD_WEBHOOK_ENCRYPTION_KEY=
