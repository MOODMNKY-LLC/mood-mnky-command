{% comment %}
  MNKY BOX Section
  - Framed editorial layout for seasonal drops
  - 3-column product grid (section blocks)
  - Seasonal accent color via settings
  - See docs/MNKY-BOX-EDITORIAL-REFINED.md and DESIGN-SYSTEM.md
{% endcomment %}

<section class="mnky-box-section" style="
  --mnky-bg: {{ section.settings.bg }};
  --mnky-frame: {{ section.settings.frame }};
  --mnky-text: {{ section.settings.text }};
  --mnky-text-muted: {{ section.settings.text_muted }};
  --mnky-accent: {{ section.settings.accent }};
">
  <div class="mnky-box-section__frame">
    <div class="mnky-box-section__inner">
      <header class="mnky-box-section__header">
        <div class="mnky-box-section__brand">{{ section.settings.kicker }}</div>
        <h2 class="mnky-box-section__title">{{ section.settings.title }}</h2>
        {% if section.settings.subhead != blank %}
          <p class="mnky-box-section__subhead">{{ section.settings.subhead }}</p>
        {% endif %}
      </header>

      {% if section.settings.hero_image != blank %}
        <div class="mnky-box-section__hero">
          <img
            src="{{ section.settings.hero_image | image_url: width: 1400 }}"
            alt="{{ section.settings.title | escape }}"
            loading="lazy"
            width="1400"
            height="1400"
          >
        </div>
      {% endif %}

      <div class="mnky-box-section__grid">
        {% for block in section.blocks %}
          {% if block.type == "product" %}
            <article class="mnky-box-card" {{ block.shopify_attributes }}>
              {% if block.settings.image != blank %}
                <div class="mnky-box-card__media">
                  <img
                    src="{{ block.settings.image | image_url: width: 800 }}"
                    alt="{{ block.settings.title | escape }}"
                    loading="lazy"
                    width="800"
                    height="800"
                  >
                </div>
              {% endif %}

              <h3 class="mnky-box-card__title">{{ block.settings.title }}</h3>

              {% if block.settings.body != blank %}
                <p class="mnky-box-card__body">{{ block.settings.body }}</p>
              {% endif %}

              <div class="mnky-box-card__meta">
                {% if block.settings.meta != blank %}
                  <span class="mnky-box-meta">{{ block.settings.meta }}</span>
                {% endif %}
                {% if block.settings.link != blank %}
                  <a class="mnky-box-link" href="{{ block.settings.link }}">
                    {{ block.settings.link_label }}
                  </a>
                {% endif %}
              </div>
            </article>
          {% endif %}
        {% endfor %}
      </div>

      <footer class="mnky-box-section__footer">
        {% if section.settings.cta_url != blank %}
          <a class="mnky-box-cta" href="{{ section.settings.cta_url }}">
            {{ section.settings.cta_label }}
          </a>
        {% endif %}
      </footer>
    </div>
  </div>
</section>

<style>
  .mnky-box-section {
    background: var(--mnky-bg);
    padding: 24px;
  }

  .mnky-box-section__frame {
    border: 12px solid var(--mnky-frame);
    padding: 24px;
    background: var(--mnky-bg);
    max-width: 1200px;
    margin: 0 auto;
  }

  .mnky-box-section__inner { color: var(--mnky-text); }

  .mnky-box-section__brand {
    letter-spacing: 0.18em;
    text-transform: uppercase;
    font-weight: 700;
    font-size: 12px;
    opacity: 0.9;
  }

  .mnky-box-section__title {
    margin: 12px 0 6px;
    font-weight: 800;
    letter-spacing: -0.02em;
    text-transform: uppercase;
    font-size: clamp(28px, 4vw, 56px);
    line-height: 1.05;
  }

  .mnky-box-section__subhead {
    margin: 0;
    color: var(--mnky-text-muted);
    max-width: 64ch;
    font-size: 16px;
    line-height: 1.6;
  }

  .mnky-box-section__hero {
    margin: 24px 0 18px;
    border: 1px solid rgba(255,255,255,0.08);
    overflow: hidden;
  }
  .mnky-box-section__hero img { width: 100%; height: auto; display: block; }

  .mnky-box-section__grid {
    display: grid;
    gap: 24px;
    grid-template-columns: repeat(3, minmax(0, 1fr));
    margin-top: 24px;
  }

  .mnky-box-card {
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.08);
    padding: 18px;
    transition: transform 200ms ease, box-shadow 200ms ease, border-color 200ms ease;
  }

  .mnky-box-card:hover {
    transform: translateY(-2px);
    border-color: rgba(255,255,255,0.18);
    box-shadow: 0 24px 50px rgba(0,0,0,0.35);
  }

  .mnky-box-card__media {
    aspect-ratio: 1 / 1;
    background: rgba(0,0,0,0.25);
    margin-bottom: 14px;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }
  .mnky-box-card__media img { width: 100%; height: 100%; object-fit: cover; }

  .mnky-box-card__title {
    margin: 0 0 8px;
    font-size: 18px;
    font-weight: 700;
    letter-spacing: -0.01em;
  }

  .mnky-box-card__body {
    margin: 0 0 14px;
    color: var(--mnky-text-muted);
    font-size: 14px;
    line-height: 1.6;
  }

  .mnky-box-card__meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 12px;
  }

  .mnky-box-meta {
    font-size: 12px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: var(--mnky-text-muted);
  }

  .mnky-box-link {
    font-size: 12px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    font-weight: 700;
    color: var(--mnky-accent);
    text-decoration: none;
  }

  .mnky-box-link:hover { text-decoration: underline; }

  .mnky-box-section__footer {
    margin-top: 28px;
    display: flex;
    justify-content: center;
  }

  .mnky-box-cta {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 12px 18px;
    border: 1px solid rgba(255,255,255,0.18);
    text-transform: uppercase;
    letter-spacing: 0.14em;
    font-weight: 800;
    font-size: 12px;
    color: var(--mnky-text);
    text-decoration: none;
  }

  .mnky-box-cta:hover {
    border-color: var(--mnky-accent);
    box-shadow: 0 0 50px rgba(255,255,255,0.08);
  }

  @media (max-width: 980px) {
    .mnky-box-section__grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
  }
  @media (max-width: 640px) {
    .mnky-box-section__grid { grid-template-columns: 1fr; }
    .mnky-box-section { padding: 16px; }
    .mnky-box-section__frame { padding: 16px; border-width: 10px; }
  }
</style>

{% schema %}
{
  "name": "MNKY Box Insert",
  "tag": "section",
  "class": "section-mnky-box",
  "settings": [
    { "type": "text", "id": "kicker", "label": "Kicker", "default": "MNKY BOX" },
    { "type": "text", "id": "title", "label": "Title", "default": "THE SUMMER DROP" },
    { "type": "textarea", "id": "subhead", "label": "Subhead", "default": "A seasonal selection—built to bottle the mood." },
    { "type": "image_picker", "id": "hero_image", "label": "Hero image" },
    { "type": "color", "id": "bg", "label": "Background", "default": "#0A0A0A" },
    { "type": "color", "id": "frame", "label": "Frame border", "default": "#F2F2F2" },
    { "type": "color", "id": "text", "label": "Text", "default": "#FFFFFF" },
    { "type": "color", "id": "text_muted", "label": "Muted text", "default": "#8A8A8A" },
    { "type": "color", "id": "accent", "label": "Accent", "default": "#B7F0FF" },
    { "type": "url", "id": "cta_url", "label": "CTA URL" },
    { "type": "text", "id": "cta_label", "label": "CTA Label", "default": "Enter the MNKY VERSE" }
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Product Card",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "text", "id": "title", "label": "Title", "default": "Caribbean Casita" },
        { "type": "textarea", "id": "body", "label": "Body", "default": "Coconut air, salt drift, warm wood—summer held in glass." },
        { "type": "text", "id": "meta", "label": "Meta label", "default": "Signature Blend" },
        { "type": "url", "id": "link", "label": "Link" },
        { "type": "text", "id": "link_label", "label": "Link Label", "default": "Explore" }
      ]
    }
  ],
  "presets": [
    { "name": "MNKY Box Insert", "blocks": [] }
  ]
}
{% endschema %}
